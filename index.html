<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<!-- New document created with EditiX at Wed Nov 22 10:04:33 SGT 2017 -->

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Cleaning Schedule</title>
<script type="text/javascript" src="loadxmldoc.js"></script>
<script type="text/javascript">
// load script
xmlDoc=loadXMLDoc("cleaningservice.xml");

// get company details from XML
function getCompanyDetails()
{
  // company element
  var company = xmlDoc.getElementsByTagName("company")[0];

  // get company name
  var compname = company.getElementsByTagName("name")[0].firstChild.nodeValue;

  // get company address
  var address = company.getElementsByTagName("address")[0];
  var street = address.getElementsByTagName("street")[0].firstChild.nodeValue;
  var city = address.getElementsByTagName("city")[0].firstChild.nodeValue;
  var state = address.getElementsByTagName("state")[0].firstChild.nodeValue;
  var postcode = address.getElementsByTagName("postcode")[0].firstChild.nodeValue;

  // get company contact
  var contact = company.getElementsByTagName("contact")[0];
  var phone = contact.getElementsByTagName("phone")[0].firstChild.nodeValue;
  var email = contact.getElementsByTagName("email")[0].firstChild.nodeValue;

  // get wages rate
  var rate = company.getElementsByTagName("rate")[0].firstChild.nodeValue;
  // rate attributes
  var rateunit = company.getElementsByTagName("rate")[0].getAttribute("unit");
  var rateduration = company.getElementsByTagName("rate")[0].getAttribute("duration");

  // create company details table
  var companytable = "<table border='1' style='border-collapse='collapse''>"+
  "<tr>"+
    "<th colspan='5' bgcolor='aqua'>"+compname+"</th>"+          
  "</tr>"+
  "<tr>"+
    "<td colspan='2'>"+
      "Company Address<br></br>"+
      "<div align='center'>"+
        "Street<br></br>"+
        "City<br></br>"+
        "State<br></br>"+
        "Postcode<br></br>"+
      "</div>"+
      "Company Contact<br></br>"+
      "<div align='center'>"+
        "Phone<br></br>"+
        "Email<br></br>"+
      "</div>"+
      "Cleaning Fee Rate"+
    "</td> "+
    "<td colspan='3' align='right'>"+
      "<div align='left'>"+
       "<br></br>"+
      "<div align='center'>"+
        street+"<br></br>"+
        city+"<br></br>"+
        state+"<br></br>"+
        postcode+"<br></br>"+
      "</div>"+
     "<br></br>"+
      "<div align='center'>"+
        phone+"<br></br>"+
        email+"<br></br>"+
        rateunit+rate+" "+rateduration+
      "</div>"+
      "</div>"+
    "</td>  "+       
  "</tr>"+
"</table>";

  // get company staff
  var staff = company.getElementsByTagName("staff")[0];
  // manager
  var manager = staff.getElementsByTagName("manager")[0];
  var managername = manager.getElementsByTagName("name")[0].firstChild.nodeValue;
  var managercontact = manager.getElementsByTagName("contact")[0];
  var managerphone = managercontact.getElementsByTagName("phone")[0].firstChild.nodeValue;
  var manageremail = managercontact.getElementsByTagName("email")[0].firstChild.nodeValue;
  // cleaners
  var cleanerNameString = "";
  var cleaners = staff.getElementsByTagName("cleaners")[0];
  var cleaner = cleaners.getElementsByTagName("cleaner");
  for(i=0;i<cleaner.length;i++)
  {
    var cnamenode = cleaner[i].getElementsByTagName("name")[0];
    cleanerNameString += "<li>"+cnamenode.firstChild.nodeValue+"</li>";  
  }

  var stafftable = "<table border='1' style='border-collapse='collapse''>"+
  "<tr>"+
    "<th colspan='5' bgcolor='aqua'>Staff</th>"+
  "</tr>"+
  "<tr>"+
    "<td colspan='2'>"+
      "Manager"+
    "</td>"+
    "<td colspan='3' align='left'>"+
      "Name: "+managername+"<br>"+
      "Phone: "+managerphone+"<br>"+
      "Email: "+manageremail+"<br>"+
    "</td>"+
  "<tr>"+
  "<tr>"+
    "<td colspan='2'>"+
      "Cleaners"+
    "</td>"+
    "<td colspan='3' align='left'>"+
      "<ol>"+cleanerNameString+"</ol>"+
    "</td>"+
  "<tr>"+
"</table>";

  // get output area
  var content = document.getElementById("content");
  content.innerHTML = companytable+"<br><br>"+stafftable;
  
}
</script>
</head>
<body>
<h1>Cleaning Schedule Project</h1>

<button onclick="getCompanyDetails()">Company Details</button>
<button onclick="getHouseList()">House List</button>
<br>
<br>

<div id="content"></div>

<br><br>
<div id="schedule"></div>

</body>
</html>
